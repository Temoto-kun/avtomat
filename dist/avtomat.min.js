!function(n,t){"use strict";var e={StateMachine:function(n,t){function e(n){return i[n].transitions.length>0}var i=[],r=null,a="",o=[r],f=t||r,u={changing:[],change:[]},s=function(n){for(var t in n)n.hasOwnProperty(t)&&n[t]()},d=function(n,t,e){i[n].transitions[t]=e},v=function(n,t){delete i[n].transitions[t]},c=function(n,t,e){if("undefined"==typeof i[n]&&(f===r&&w(n),i[n]=l(),n!==r&&(p(n,t),"undefined"!=typeof e)))for(var a in e)e.hasOwnProperty(a)&&d(n,a,e[a])},h=function(n){delete i[n]},l=function(){return{"final":!1,transitions:[],events:{arriving:[],arrive:[],leaving:[],leave:[]}}},p=function(n,t){n!==r&&(i[n]["final"]=t)},g=function(){return o=[f],y(""),o},y=function b(n){var t=o,e=[],f=!1;for(s(u.changing);t.length>0;){var d=t.shift();s(i[d].events.leaving);var v,c=i[d].transitions[n]||(n===a?d:r);v=c instanceof Array?c:[c];for(var h=0;h<v.length;h++){for(var l=!1,p=0,g=e.length;g>p;p++)l=l||e[p]===v[h];l||v[h]===r||(s(i[d].events.leave),s(i[v[h]].events.arriving),e.push(v[h]),s(i[v[h]].events.arrive))}n===a&&c===r&&(f=!1)}if(o=e,s(u.change),e.length>0){for(var y in e)if(e.hasOwnProperty(y)&&"undefined"!=typeof i[e[y]].transitions[a]){f=!0;break}f&&b(a)}return o},w=function(n){f=n},O=function(){return o},P=function(){for(var n in o)if(o.hasOwnProperty(n)&&i[o[n]]["final"])return!0;return!1},m=function(){return 0===o.length},A=function(n,t,e){i[n].events[t].push(e)},S=function(n,t){u[n].push(t)},T=function(n,t){return"undefined"!==i[n].transitions[t]||t===a};return function(n,t){if(c(r,!1,[]),"undefined"!=typeof n)for(var e in n)n.hasOwnProperty(e)&&c(e,n[e]["final"],n[e].transitions);"undefined"!=typeof t&&w(t),g()}(n,t),{reset:g,input:y,state:O,accepted:P,nullState:m,addState:c,deleteState:h,addTransition:d,deleteTransition:v,hasTransition:T,hasTransitions:function(n){if("undefined"==typeof n)n=O();else if(n instanceof Array){var t=!1;for(var i in n)n.hasOwnProperty(i)&&(t=t||e(i));return t}return"string"==typeof n&&e(n)},bindStateEvent:A,bindMachineEvent:S}}};n.Avtomat=n.Avtomat||e,t.exports={Avtomat:e}}("undefined"!=typeof window?window:this,"undefined"!=typeof module?module:{});